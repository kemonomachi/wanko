#!/usr/bin/ruby

require 'optparse'

require_relative '../lib/wanko'
require_relative '../lib/wanko/parser'

options = Wanko::Parser.new.parse! ARGV
fetcher = Wanko::Fetcher.new

case options[:action]
when :add
  if options[:directory]
    fetcher.add options[:pattern], options[:directory]
  else
    fetcher.add options[:pattern]
  end
when :add_feed
  fetcher.add_feed options[:url]
when :fetch
  fetcher.fetch
when :list
  fetcher.list :rules
when :remove
  fetcher.remove :rules, options[:indexes]
when :remove_feed
  fetcher.remove :feeds, options[:indexes]
when :set_default_dir
  fetcher.default_dir = options[:directory]
when :show_default_dir
  puts fetcher.default_dir
when :show_feeds
  fetcher.list :feeds
end

